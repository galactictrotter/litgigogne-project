{{/* layouts/partials/savoir-faire-section.html */}}
{{/* Dynamic Savoir-Faire Section for Le Lit Gigogne Homepage */}}

{{ $savoirFairePage := site.GetPage "/a-propos/artisanat-francais-patrimoine-vivant" }}
{{ $heritagePages := slice }}
{{ $heritagePages = $heritagePages | append (site.GetPage "/a-propos/heritage-espace-mieux-etre") }}
{{ $heritagePages = $heritagePages | append (site.GetPage "/a-propos/engagement-environnemental") }}

<section id="savoir-faire" class="content-section savoir-faire-section">
    <div class="container">
        {{ if $savoirFairePage }}
        <div class="heritage-content">
            <!-- Main Content Block -->
            <div class="heritage-text">
                <span class="section-tag fade-in">Depuis 1984</span>
                <h2 class="fade-in">{{ $savoirFairePage.Title }}</h2>
                
                <!-- Philosophy Summary -->
                <div class="philosophy-text fade-in">
                    {{ $excerpt := $savoirFairePage.Summary }}
                    {{ if not $excerpt }}
                        {{ $excerpt = truncate 280 $savoirFairePage.Plain " ..." }}
                    {{ end }}
                    <p class="lead-text">{{ $excerpt | markdownify | safeHTML }}</p>
                </div>
                
                <!-- Heritage Pillars -->
                {{ if $savoirFairePage.Params.key_points }}
                <div class="heritage-pillars fade-in">
                    {{ range first 3 $savoirFairePage.Params.key_points }}
                    <div class="heritage-pillar">
                        <div class="pillar-icon">
                            <svg viewBox="0 0 24 24" class="icon">
                                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke="currentColor" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <p>{{ . }}</p>
                    </div>
                    {{ end }}
                </div>
                {{ end }}

                <!-- Expertise Areas -->
                <div class="expertise-areas fade-in">
                    <h3>Notre Excellence Artisanale</h3>
                    <ul class="expertise-list">
                        <li>
                            <strong>Pin Massif des Landes</strong>
                            <span>Sélection rigoureuse de bois issus de forêts françaises gérées durablement</span>
                        </li>
                        <li>
                            <strong>Assemblages Traditionnels</strong>
                            <span>Tenons-mortaises chevillés, techniques ancestrales de l'ébénisterie française</span>
                        </li>
                        <li>
                            <strong>Finitions Artisanales</strong>
                            <span>Huiles chauffées, vernis fins, secrets d'atelier transmis depuis des générations</span>
                        </li>
                        <li>
                            <strong>Création Sur Mesure</strong>
                            <span>Chaque pièce adaptée à vos besoins, dimensions et finitions personnalisées</span>
                        </li>
                    </ul>
                </div>

                <!-- Call to Action -->
                <div class="heritage-cta fade-in">
                    <a href="{{ $savoirFairePage.RelPermalink }}" class="cta-link">
                        Découvrir Notre Histoire Complète →
                    </a>
                </div>
            </div>
            
            <!-- Visual Heritage Block -->
            <div class="heritage-visual fade-in">
                {{ if $savoirFairePage.Params.gallery }}
                    {{ $firstImage := index $savoirFairePage.Params.gallery 0 }}
                    <div class="artisan-image">
                        <img src="{{ $firstImage.url }}" alt="{{ $firstImage.alt }}" loading="lazy">
                        <div class="image-caption">
                            <span class="caption-tag">Savoir-Faire</span>
                            <p>L'art de transformer le bois en poésie</p>
                        </div>
                    </div>
                {{ else }}
                <div class="placeholder-artisan">
                    <svg viewBox="0 0 400 300" class="artisan-illustration">
                        <rect width="400" height="300" fill="var(--primary-cream)"/>
                        
                        <!-- Artisan silhouette -->
                        <g fill="var(--bronze-accent)" opacity="0.3">
                            <ellipse cx="200" cy="100" rx="25" ry="35"/>
                            <rect x="175" y="135" width="50" height="80" rx="5"/>
                            <rect x="150" y="145" width="35" height="60" rx="15"/>
                            <rect x="215" y="145" width="35" height="60" rx="15"/>
                        </g>
                        
                        <!-- Wood grain pattern -->
                        <g stroke="var(--bronze-accent)" stroke-width="1" opacity="0.2" fill="none">
                            <path d="M50 250 Q150 240 250 250 Q350 260 400 250"/>
                            <path d="M50 260 Q150 250 250 260 Q350 270 400 260"/>
                            <path d="M50 270 Q150 260 250 270 Q350 280 400 270"/>
                        </g>
                        
                        <text x="200" y="290" text-anchor="middle" fill="var(--deep-charcoal)" font-size="14" font-family="Playfair Display, serif">
                            Artisanat Français Depuis 1984
                        </text>
                    </svg>
                </div>
                {{ end }}
                
                <!-- Heritage Stats -->
                <div class="heritage-stats">
                    <div class="stat-item">
                        <span class="stat-number">40+</span>
                        <span class="stat-label">Années d'Excellence</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">100%</span>
                        <span class="stat-label">Fabrication Française</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">∞</span>
                        <span class="stat-label">Passion Artisanale</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Related Heritage Content -->
        {{ if $heritagePages }}
        <div class="heritage-related fade-in">
            <h3>Notre Engagement</h3>
            <div class="related-grid">
                {{ range $heritagePages }}
                {{ if . }}
                <article class="heritage-card">
                    <div class="card-content">
                        <h4>{{ .Title }}</h4>
                        <p>{{ truncate 120 .Summary "..." }}</p>
                        <a href="{{ .RelPermalink }}" class="read-more">
                            En savoir plus →
                        </a>
                    </div>
                </article>
                {{ end }}
                {{ end }}
            </div>
        </div>
        {{ end }}

        {{ else }}
        <!-- Fallback Content if markdown file is unavailable -->
        <div class="heritage-content">
            <div class="heritage-text">
                <span class="section-tag fade-in">Depuis 1984</span>
                <h2 class="fade-in">L'Excellence de l'Artisanat Français</h2>
                
                <div class="philosophy-text fade-in">
                    <p class="lead-text">
                        Chez Le Lit Gigogne, nous perpétuons l'excellence de l'artisanat français depuis quatre décennies. 
                        Chaque meuble est une œuvre d'art fonctionnelle, née de la rencontre entre savoir-faire ancestral 
                        et innovation respectueuse.
                    </p>
                </div>
                
                <div class="heritage-pillars fade-in">
                    <div class="heritage-pillar">
                        <div class="pillar-icon">
                            <svg viewBox="0 0 24 24" class="icon">
                                <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <p>Pin massif des Landes, sélectionné pour sa qualité exceptionnelle</p>
                    </div>
                    <div class="heritage-pillar">
                        <div class="pillar-icon">
                            <svg viewBox="0 0 24 24" class="icon">
                                <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <p>Assemblages traditionnels, garants de robustesse et d'authenticité</p>
                    </div>
                    <div class="heritage-pillar">
                        <div class="pillar-icon">
                            <svg viewBox="0 0 24 24" class="icon">
                                <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <p>Création sur mesure, adaptée à vos espaces et vos besoins</p>
                    </div>
                </div>
                
                <div class="heritage-cta fade-in">
                    <a href="/a-propos" class="cta-link">
                        Découvrir Notre Histoire →
                    </a>
                </div>
            </div>
            
            <div class="heritage-visual fade-in">
                <div class="placeholder-artisan">
                    <svg viewBox="0 0 400 300" class="artisan-illustration">
                        <rect width="400" height="300" fill="var(--primary-cream)"/>
                        <g fill="var(--bronze-accent)" opacity="0.3">
                            <ellipse cx="200" cy="100" rx="25" ry="35"/>
                            <rect x="175" y="135" width="50" height="80" rx="5"/>
                        </g>
                        <text x="200" y="290" text-anchor="middle" fill="var(--deep-charcoal)" font-size="14" font-family="Playfair Display, serif">
                            Savoir-Faire Artisanal Français
                        </text>
                    </svg>
                </div>
            </div>
        </div>
        {{ end }}
    </div>
</section>