{{ define "main" }}
<!-- Breadcrumb -->
{{ if .Params.breadcrumb }}
<div class="container">
    <nav class="breadcrumb">
        {{ range $index, $item := .Params.breadcrumb }}
            {{ if ne $index 0 }} &gt; {{ end }}
            {{ if eq $index (sub (len $.Params.breadcrumb) 1) }}
                <span>{{ $item.name }}</span>
            {{ else }}
                <a href="{{ $item.url }}">{{ $item.name }}</a>
            {{ end }}
        {{ end }}
    </nav>
</div>
{{ end }}

<!-- DEBUG TEST -->
<div style="background: red; color: white; padding: 20px; margin: 20px; font-size: 20px;">
    ðŸ”´ CONTACT TEMPLATE IS WORKING!
    <br>Title: {{ .Params.cta.title }}
    <br>Button Text: {{ .Params.cta.button_text }}
</div>


<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <h1 class="fade-in">{{ .Params.hero.title | default .Title }}</h1>
        <p class="hero-subtitle fade-in">{{ .Params.hero.subtitle }}</p>
    </div>
</section>

<!-- Contact Content Section -->
<section class="contact-content">
    <div class="container">
        <div class="contact-grid">
            <!-- Contact CTA -->
            <div class="contact-cta fade-in">
                <h2>{{ .Params.cta.title | default "Commencez Votre Projet" }}</h2>
                <div class="cta-content">
                    {{ .Params.cta.description | markdownify }}
                </div>
                <button class="cta-button" data-modal="contact">
                    {{ .Params.cta.button_text | default "J'envoie Mon Projet" }}
                </button>
            </div>
            <!-- Contact Info -->
            <div class="contact-info fade-in">
                <h2>{{ .Params.contact_info.title | default "Restons en Contact" }}</h2>
                
                {{ range .Params.contact_info.sections }}
                <div class="info-item">
                    <h4>{{ .title }}</h4>
                    {{ range .details }}
                    <p>{{ if .bold }}<strong>{{ .text }}</strong>{{ else }}{{ .text | markdownify }}{{ end }}</p>
                    {{ end }}
                </div>
                {{ end }}

                {{ if .Params.contact_info.social }}
                <div class="info-item">
                    <h4>{{ .Params.contact_info.social.title | default "RÃ©seaux Sociaux" }}</h4>
                    {{ range .Params.contact_info.social.links }}
                    <p><strong>{{ .platform }} :</strong> {{ .handle }}</p>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </div>
    </div>
</section>

{{ if .Params.map_section.enabled }}
<!-- Map Section -->
<section class="map-section">
    <div class="container">
        <h2 class="fade-in">{{ .Params.map_section.title | default "Visitez Notre Atelier" }}</h2>
        <div class="map-container fade-in">
            {{ if .Params.map_section.embed_code }}
                {{ .Params.map_section.embed_code | safeHTML }}
            {{ else }}
                <p>{{ .Params.map_section.placeholder_text | default "Carte interactive de notre emplacement" }}</p>
            {{ end }}
        </div>
    </div>
</section>
{{ end }}

{{ if .Params.showroom_section.enabled }}
<!-- Showroom Section -->
<section class="showroom-section">
    <div class="container">
        <h2 class="fade-in">{{ .Params.showroom_section.title | default "Une ExpÃ©rience Unique" }}</h2>
        <p class="fade-in">{{ .Params.showroom_section.description }}</p>
        
        <div class="showroom-grid">
            {{ range .Params.showroom_section.features }}
            <div class="showroom-card fade-in">
                {{ if .icon_svg }}
                    {{ .icon_svg | safeHTML }}
                {{ else }}
                    <svg class="showroom-icon" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="30" cy="30" r="25" fill="none" stroke="#B08D57" stroke-width="2"/>
                        <path d="M20 30 L40 30 M30 20 L30 40" stroke="#B08D57" stroke-width="2"/>
                    </svg>
                {{ end }}
                <h4>{{ .title }}</h4>
                <p>{{ .description }}</p>
            </div>
            {{ end }}
        </div>
    </div>
</section>
{{ end }}

<!-- Optional: Additional content from markdown -->
{{ if .Content }}
<section class="additional-content">
    <div class="container">
        <div class="content-wrapper fade-in">
            {{ .Content }}
        </div>
    </div>
</section>
{{ end }}

{{ end }}